(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(t,e,a){},193:function(t,e,a){t.exports=a.p+"static/media/Spotify_logo_without_text.e359ad39.svg"},200:function(t,e,a){t.exports=a(340)},205:function(t,e,a){},337:function(t,e,a){},338:function(t,e,a){},340:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),c=a(23),o=a.n(c),s=(a(205),a(29)),i=a(60),l=a(18),m=a(19),u=a(21),h=a(20),p=a(22),d=a(16),b=a.n(d),k=a(381),g=a(384),f=a(385),C=a(387),v=a(383),E=a(388),y=a(386),T={card:{maxWidth:"185.25px",maxHeight:"300px",padding:"0",boxSizing:"border-box"},content:{height:"60px",boxSizing:"border-box",overflow:"scroll",background:"#121212;"},actions:{}},S=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={redirectToBarChart:!1},a.addTrackToBarChart=function(){b.a.post("/api/barCharts/".concat(a.props.barChartId,"/tracks"),a.props.track).then(function(t){a.setState({redirectToBarChart:!0})})},a.deleteTrack=function(){b.a.delete("/api/barCharts/".concat(a.props.barChartId,"/tracks"),a.props.track._id).then(function(t){return console.log(t)})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.imgUrl||this.props.track.album.images[1].url;return n.a.createElement(k.a,{className:"Trackcard card",style:T.card},n.a.createElement(v.a,null,n.a.createElement(g.a,{component:"img",className:"media",image:t,title:"album cover"}),n.a.createElement(f.a,{style:T.content},n.a.createElement(y.a,{variant:"body2",color:"textSecondary",component:"p"},this.props.track.name),n.a.createElement(y.a,{variant:"body2",color:"textSecondary",component:"p"},this.props.track.artists[0].name))),n.a.createElement(C.a,{style:T.actions},n.a.createElement(E.a,{size:"small",color:"primary",onClick:this.addTrackToBarChart},"Add")))}}]),e}(r.Component),F=a(389),O=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={tracks:[],isTrackSearchDisplayed:!1},a.getTracks=function(){b.a.get("/api/barCharts/".concat(a.props.match.params.barChartId,"/tracks")).then(function(t){a.setState({tracks:t.data})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getTracks()}},{key:"render",value:function(){var t=this,e=this.state.tracks.map(function(e){return console.log(e),console.log(e.album[0].images[1].url),n.a.createElement(S,{key:e._id,track:e,barChartId:t.props.match.params.barChartId,imgUrl:e.album[0].images[1].url})});return n.a.createElement("div",null,n.a.createElement(F.a,{cols:2.5},e))}}]),e}(r.Component),j=(a(339),function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={user:{}},a.getUser=function(){b.a.get("api/users/".concat(a.props.match.params.userId)).then(function(t){a.setState({user:t.data})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",null,this.state.user.name),n.a.createElement("p",null,this.state.user.email))}}]),e}(r.Component)),w=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={track:{},redirectToBarChart:!1},a.getTrack=function(){b.a.get("/api/barcharts/".concat(a.props.match.params.barChartId,"/tracks/").concat(a.props.match.params.trackId)).then(function(t){a.setState({track:t.data}),console.log("from singletrack",t.data)})},a.deleteTrack=function(){b.a.delete("/api/barCharts/".concat(a.props.barChartId,"/tracks/").concat(a.props.match.params.trackId)).then(function(t){a.setState({redirectToBarChart:!0})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getTrack()}},{key:"render",value:function(){return this.state.redirectToBarChart?n.a.createElement(i.a,{to:"/barcharts/".concat(this.props.match.params.barChartId)}):n.a.createElement("div",null,n.a.createElement("p",null," ",this.state.track.name),n.a.createElement("button",{onClick:this.deleteTrack},"Delete"),n.a.createElement("div",null,n.a.createElement(s.b,{to:"/barcharts/".concat(this.props.match.params.barChartId,"/tracks")},"Back")))}}]),e}(r.Component),I=a(67),A=a.n(I),B=a(395),D=a(397),x=a(392),N=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(m.a)(e,[{key:"getStyles",value:function(){return{axisOne:{fill:"white"}}}},{key:"render",value:function(){var t=this.getStyles(),e=this.props.data,a=this.props.graphFeature;return console.log("from barchart",e),n.a.createElement(B.a,{domainPadding:20},n.a.createElement(D.a,{tickFormat:function(t){return"".concat(t)}}),n.a.createElement(D.a,{dependentAxis:!0,tickFormat:function(t){return"".concat(t)},style:t.axisOne}),n.a.createElement(x.a,{style:{data:{fill:"#56FA71"}},data:e,x:"name",y:a}))}}]),e}(r.Component);N.defaultProps={graphFeature:"energy"};a(124),a(337);var _=a(393),U=new A.a,M=function(t){function e(t){var a;Object(l.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).handleChange=function(t){var e=t.target.value;a.setState({searchField:e}),console.log(a.state.searchField)},a.handleSubmit=function(t){t.preventDefault(),console.log(a.state.searchField),U.searchTracks(a.state.searchField).then(function(t){a.setState({searchTracks:t.tracks.items})})};var r=localStorage.getItem("token");return r&&U.setAccessToken(r),a.state={searchTracks:[],searchField:"",newTrack:{}},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this,e=this.state.searchTracks,a=e.length?e.map(function(e){return n.a.createElement(S,{track:e,barChartId:t.props.barChartId})}):null;return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(_.a,{id:"outlined-search-input",label:"track",className:"textField",type:"search",name:"search",autoComplete:"track",margin:"normal",variant:"outlined",onChange:this.handleChange,value:this.state.searchField}),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"submit-form"},n.a.createElement(E.a,{variant:"contained",component:"span"},"Search",n.a.createElement("input",{id:"submit-form",type:"submit",style:{display:"none"}}))))),n.a.createElement("div",{className:"track-list"},a))}}]),e}(r.Component),W=a(390),P=new A.a,L=function(t){function e(){var t;Object(l.a)(this,e),t=Object(u.a)(this,Object(h.a)(e).call(this));var a=localStorage.getItem("token");return a&&P.setAccessToken(a),t.state={loggedIn:!!a,nowPlaying:{name:"Not Checked",albumArt:""},currentUser:{displayName:"",email:"",externalUrls:"",country:"",id:"",type:""},topTracks:[],topTrackAudioFeatures:[],tracksWithFeatures:[]},t}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getCurrentUser()}},{key:"componentDidUpdate",value:function(t,e){e.currentUser!==this.state.currentUser&&this.getTopTracks(),e.topTracks!==this.state.topTracks&&this.getTopTrackAudioFeatures(),e.topTrackAudioFeatures!==this.state.topTrackAudioFeatures&&this.attachTrackAudioFeatures()}},{key:"attachTrackAudioFeatures",value:function(){var t=this.state,e=t.topTracks,a=t.topTrackAudioFeatures,r=[];e.forEach(function(t,e){r.push(Object.assign({},t,a[e]))}),this.setState({tracksWithFeatures:r}),console.log("tracksWithFeatures:"),console.log(r)}},{key:"getCurrentUser",value:function(){var t=this;P.getMe().then(function(e){console.log(e);var a={displayName:e.display_name,email:e.email,externalUrls:e.external_urls,country:e.country,id:e.id,type:e.type};b.a.post("/api/users",a).then(function(t){}),t.setState({currentUser:a})})}},{key:"getTopTracks",value:function(){var t=this;P.getMyTopTracks({limit:10}).then(function(e){t.setState({topTracks:e.items})})}},{key:"getTopTrackAudioFeatures",value:function(){var t=this,e=this.state.topTracks.map(function(t){return t.id});P.getAudioFeaturesForTracks(e).then(function(e){console.log(e),t.setState({topTrackAudioFeatures:e.audio_features})})}},{key:"getNowPlaying",value:function(){var t=this;P.getMyCurrentPlaybackState().then(function(e){console.log(e),t.setState({nowPlaying:{name:e.item.name,albumArt:e.item.album.images[0].url}})})}},{key:"render",value:function(){var t=this.state.topTracks,e=t.length?t.map(function(t){return n.a.createElement(S,{key:t.id,track:t})}):null;return n.a.createElement(W.a,{className:"Home"},n.a.createElement("h1",null,"SpotiViz"),n.a.createElement(s.b,{to:"/barcharts/"},"All BarCharts"),n.a.createElement("div",null,this.state.currentUser.email),n.a.createElement("h1",null,"Top Tracks for ",this.state.currentUser.id),n.a.createElement("div",{className:"track-list"},e))}}]),e}(r.Component),z=window.location.hash.substring(1).split("&").reduce(function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t},{});window.location.hash="";var H=z,V=a(193),J=a.n(V),Y=["user-read-private","user-read-email","user-read-recently-played","user-top-read","user-library-read","playlist-read-collaborative","playlist-read-private","user-library-read","user-read-playback-state","user-read-currently-playing"],G=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(u.a)(this,Object(h.a)(e).call(this))).state={token:null},t}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=H.access_token;t&&(localStorage.setItem("token",t),this.setState({token:t}))}},{key:"render",value:function(){return n.a.createElement("header",{className:"Login-header"},n.a.createElement("div",null,n.a.createElement("img",{src:J.a,className:"Login-logo",alt:"logo"})),!this.state.token&&n.a.createElement("a",{className:"btn btn--login Login-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("baf17787c2f143b594964abf61d5ae74","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(Y.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),this.state.token&&n.a.createElement(i.a,{to:"/home"}))}}]),e}(r.Component),R=a(72),q=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={newBarChart:{name:"",graphFeature:"energy"},redirectToBarCharts:!1},a.handleChange=function(t){var e=Object(R.a)({},a.state.newBarChart);e[t.target.name]=t.target.value,a.setState({newBarChart:e})},a.handleSubmit=function(t){t.preventDefault(),b.a.post("/api/barCharts",a.state.newBarChart).then(function(){a.setState({redirectToBarCharts:!0})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return this.state.redirectToBarCharts?n.a.createElement(i.a,{to:"/barCharts"}):n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",{htmlFor:"barchart-name"},"Name"),n.a.createElement("input",{onChange:this.handleChange,type:"text",id:"barchart-name",name:"name",value:this.state.newBarChart.name,placeholder:"Enter name"}),n.a.createElement("label",{htmlFor:"barchart-graphfeature"},"Graph Feature"),n.a.createElement("select",{value:this.state.newBarChart.graphFeature,id:"barchart-graphfeature",name:"graphFeature",onChange:this.handleChange},n.a.createElement("option",{value:"duration_ms"},"Duration"),n.a.createElement("option",{value:"acousticness"},"Acousticness"),n.a.createElement("option",{value:"danceability"},"Danceability"),n.a.createElement("option",{value:"instrumentalness"},"Instrumentalness"),n.a.createElement("option",{value:"liveness"},"Liveness"),n.a.createElement("option",{value:"loudness"},"Loudness"),n.a.createElement("option",{value:"speechiness"},"Speechiness"),n.a.createElement("option",{value:"tempo"},"Tempo"),n.a.createElement("option",{value:"valence"},"Valence"),n.a.createElement("option",{value:"popularity"},"Popularity")),n.a.createElement("input",{type:"submit"})))}}]),e}(r.Component),K=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={barCharts:[]},a.getAllBarCharts=function(){b.a.get("/api/barCharts").then(function(t){console.log(t),a.setState({barCharts:t.data})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getAllBarCharts()}},{key:"render",value:function(){console.log("render!");var t=this.state.barCharts.map(function(t){return n.a.createElement("div",{key:t._id},n.a.createElement(s.b,{to:"/barcharts/".concat(t._id)},t.name))});return n.a.createElement("div",null,n.a.createElement("h1",null,"All BarCharts"),n.a.createElement("div",null,t),n.a.createElement(s.b,{to:"/barcharts/new"},"New BarChart"))}}]),e}(r.Component),Q=new A.a,X=function(t){function e(){var t;Object(l.a)(this,e),(t=Object(u.a)(this,Object(h.a)(e).call(this))).getBarChart=function(){b.a.get("/api/barCharts/".concat(t.props.match.params.barChartId)).then(function(e){t.setState({barChart:e.data})})},t.handleDeleteBarChart=function(){b.a.delete("/api/barCharts/".concat(t.props.match.params.barChartId)).then(function(){t.setState({redirectToHome:!0})})},t.getTracks=function(){console.log(t.props.match.params.barChartId),b.a.get("/api/barCharts/".concat(t.props.match.params.barChartId,"/tracks")).then(function(e){console.log(e.data),t.setState({tracks:e.data})})},t.getCommments=function(){b.a.get("/api/barCharts/".concat(t.props.match.params.barChartId,"/comments")).then(function(e){t.setState({comments:e.data})})},t.getTrackAudioFeatures=function(){var e=t.state.tracks.map(function(t){return t.id});Q.getAudioFeaturesForTracks(e).then(function(e){console.log(e),t.setState({tracksAudioFeatures:e.audio_features})})},t.handleShowSearchBar=function(){t.setState(function(t){return{showSearchBar:!t.showSearchBar}})},t.handleToggleNewCommentForm=function(){t.setState(function(t){return{isNewCommentFormDisplayed:!t.isNewCommentFormDisplayed}})},t.handleInputChange=function(e){var a=Object(R.a)({},t.state.newComment);a[e.target.name]=e.target.value,t.setState({newComment:a})},t.handleCommentSubmit=function(e){e.preventDefault(),b.a.post("/api/barCharts/".concat(t.props.match.params.barChartId,"/comments"),t.state.newComment).then(function(){t.handleToggleNewCommentForm(),t.getCommments()})};var a=localStorage.getItem("token");return a&&Q.setAccessToken(a),t.state={barChart:{},tracks:[],tracksAudioFeatures:[],tracksWithFeatures:[],showSearchBar:!1,showComments:!1,comments:[],newComment:{comment:"",author:""},isNewCommentFormDisplayed:!1,redirectToHome:!1},t}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getBarChart(),this.getTracks(),this.getCommments()}},{key:"componentDidUpdate",value:function(t,e){e.barChart!==this.state.barChart&&this.getTracks(),e.tracks!==this.state.tracks&&this.getTrackAudioFeatures(),e.tracksAudioFeatures!==this.state.tracksAudioFeatures&&this.attachTrackAudioFeatures()}},{key:"attachTrackAudioFeatures",value:function(){var t=this.state,e=t.tracks,a=t.tracksAudioFeatures,r=[];e.forEach(function(t,e){r.push(Object.assign({},t,a[e]))}),this.setState({tracksWithFeatures:r}),console.log("tracksWithFeatures:"),console.log(r)}},{key:"render",value:function(){var t=this;if(this.state.redirectToHome)return n.a.createElement(i.a,{to:"/home"});var e=this.state.comments.map(function(e){return n.a.createElement("div",{key:e._id},n.a.createElement("p",null,e.comment),n.a.createElement("p",null,"By: ",e.author),n.a.createElement(s.b,{to:"/barcharts/".concat(t.props.match.params.barChartId,"/comments/").concat(e._id)},"View/Edit"))});return n.a.createElement("div",null,n.a.createElement("h1",null,this.state.barChart.name),n.a.createElement("p",null,this.state.barChart.graphFeature),n.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.handleDeleteBarChart},"Delete Barchart"),this.state.showSearchBar?n.a.createElement("div",null,n.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.handleShowSearchBar},"Done"),n.a.createElement(M,{barChartId:this.props.match.params.barChartId})):n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(O,null),n.a.createElement(s.b,{to:"/barcharts/".concat(this.props.match.params.barChartId,"/tracks")},"Tracks")),n.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.handleShowSearchBar},"Add Tracks"),n.a.createElement(N,{data:this.state.tracksWithFeatures,graphFeature:this.state.graphFeature}),n.a.createElement("div",{className:"track-list"}),this.state.isNewCommentFormDisplayed?n.a.createElement("form",{onSubmit:this.handleCommentSubmit},n.a.createElement("label",{htmlFor:"comment"},"Comment"),n.a.createElement("input",{onChange:this.handleInputChange,type:"text",id:"comment",name:"comment",value:this.state.newComment.comment}),n.a.createElement("label",{htmlFor:"author"},"Author"),n.a.createElement("input",{onChange:this.handleInputChange,type:"text",id:"author",name:"author",value:this.state.newComment.author}),n.a.createElement("input",{type:"submit",value:"Add"})):n.a.createElement("div",null,n.a.createElement("h5",null,"Comments"),e,n.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:this.handleToggleNewCommentForm},"New Comment"))))}}]),e}(r.Component),Z=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={comment:{},isEditFormDisplayed:!1,redirectToBarChart:!1},a.handleInputChange=function(t){var e=Object(R.a)({},a.state.comment);e[t.target.name]=t.target.value,a.setState({comment:e})},a.handleSubmit=function(t){t.preventDefault(),b.a.put("/api/barCharts/".concat(a.props.match.params.barChartId,"/comments/").concat(a.props.match.params.commentId),a.state.comment).then(function(t){a.setState({comment:t.data,redirectToBarChart:!0})})},a.handleToggleEditForm=function(){a.setState(function(t){return{isEditFormDisplayed:!t.isEditFormDisplayed}})},a.handleDeleteComment=function(){b.a.delete("/api/barCharts/".concat(a.props.match.params.barChartId,"/comments/").concat(a.props.match.params.commentId)).then(function(){a.setState({redirectToBarChart:!0})})},a}return Object(p.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.getComment()}},{key:"getComment",value:function(){var t=this;b.a.get("/api/barCharts/".concat(this.props.match.params.barChartId,"/comments/").concat(this.props.match.params.commentId)).then(function(e){t.setState({comment:e.data})})}},{key:"render",value:function(){return this.state.redirectToBarChart?n.a.createElement(i.a,{to:"/barcharts/".concat(this.props.match.params.barChartId)}):this.state.isEditFormDisplayed?n.a.createElement(W.a,null,n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",null,n.a.createElement(_.a,{id:"outlined-commenet-input",multiline:!0,label:"Comment",className:"textField",type:"text",name:"comment",autoComplete:"Your comment...",margin:"normal",variant:"outlined",onChange:this.handleInputChange,value:this.state.comment.comment})),n.a.createElement("div",null,n.a.createElement(_.a,{id:"outlined-author-input",label:"Author",className:"textField",type:"text",name:"author",autoComplete:"Your name...",margin:"normal",variant:"outlined",onChange:this.handleInputChange,value:this.state.comment.author}),n.a.createElement("input",{type:"submit",value:"Save"})))):n.a.createElement("div",null,n.a.createElement("p",null,this.state.comment.comment),n.a.createElement("p",null,"By: ",this.state.comment.author),n.a.createElement("button",{onClick:this.handleToggleEditForm},"Edit"),n.a.createElement("button",{onClick:this.handleDeleteComment},"Delete"))}}]),e}(r.Component),$=a(391),tt=a(194),et=(a(338),Object(tt.a)({palette:{type:"dark",primary:{main:"#1DB954"}}}));var at=function(){return n.a.createElement($.a,{theme:et},n.a.createElement("div",{className:"App"},n.a.createElement(s.a,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/barcharts/:barChartId/tracks/:trackId",component:w}),n.a.createElement(i.b,{path:"/barcharts/:barChartId/comments/:commentId",component:Z}),n.a.createElement(i.b,{exact:!0,path:"/barcharts/new",component:q}),n.a.createElement(i.b,{path:"/barcharts/:barChartId/tracks",component:O}),n.a.createElement(i.b,{path:"/barcharts/:barChartId",component:X}),n.a.createElement(i.b,{path:"/barcharts",component:K}),n.a.createElement(i.b,{path:"/home",component:L}),n.a.createElement(i.b,{exact:!0,path:"/",component:G}),n.a.createElement(i.b,{path:"/:userId",component:j}),n.a.createElement(i.b,{path:"/:userId/tracks",component:O})))))};o.a.render(n.a.createElement(at,null),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.7fcda8cc.chunk.js.map